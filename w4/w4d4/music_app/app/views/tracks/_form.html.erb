<% action_url = track.persisted? ? track_url(track) : tracks_url %>
<% method = track.persisted? ? "PATCH" : "POST" %>

<form action="<%= action_url %>" method="POST">
  <input type="hidden" name="_method" value="<%= method %>">
  <input
    type="hidden"
    name="authenticity_token"
    value="<%= form_authenticity_token %>"
  >
  <p>
    <label>
      Name
      <input type="text" name="track[name]" value="<%= track.name %>">
    </label>
  </p>

  <input type="submit">
</form>
